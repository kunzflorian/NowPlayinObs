@page "/recommendations"
@using System.Timers
@rendermode InteractiveWebAssembly

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<link href="_content/Blazor.Bootstrap/blazor.bootstrap.css" rel="stylesheet" />
<link href="/Recommendations/style.css" rel="stylesheet" />

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<!-- Add chart.js reference if chart components are used in your application. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.0.1/chart.umd.js" integrity="sha512-gQhCDsnnnUfaRzD8k1L5llCCV6O9HN09zClIzzeJ8OJ9MpGmIlCxm+pdCkqTwqJ4JcjbojFr79rl2F1mzcoLMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Add chartjs-plugin-datalabels.min.js reference if chart components with data label feature is used in your application. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js" integrity="sha512-JPcRR8yFa8mmCsfrw4TNte1ZvF1e3+1SdGMslZvmrzDYxS69J7J49vkFL8u6u8PlPJK+H3voElBtUCzaXj+6ig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Add sortable.js reference if SortableList component is used in your application. -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
<script src="_content/Blazor.Bootstrap/blazor.bootstrap.js"></script>

<div class="recommendation-headline"/>
<Carousel @ref="_carousel" ShowPreviousNextControls="false" Interval="3000">
    <CarouselItem Class="recommendation-item">
        <div class="recommendation-artist">wuffnuffs</div>
        <div Class="recommendation-image">
            <Image Src="/Recommendations/wuffnuffs.png" />
        </div>

    </CarouselItem>
    <CarouselItem Active="true">
        <div class="recommendation-artist">juicedrumandbass</div>
        <div Class="recommendation-image">
            <Image Src="/Recommendations/juicedrumandbass.png" />
        </div>
    </CarouselItem>
</Carousel>

@code {
    Carousel _carousel = default!;
    Timer _timer = default!;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        _timer = new Timer(30000);
        _timer.Elapsed += OnTimerElapsed;
        _timer.Enabled = true;

    }

    private void OnTimerElapsed(object? sender, ElapsedEventArgs e)
    {
        _carousel.ShowPreviousItemAsync();

    }
}
